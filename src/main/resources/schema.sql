CREATE TABLE account (
	uid INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1),
	user_name VARCHAR(255) NOT NULL,
	session_timeout INTEGER,
	password CHAR(60) NOT NULL,
	secret_key BLOB(48) NOT NULL,
	secret_key_salt BLOB(8) NOT NULL,
	secret_key_iv BLOB(16) NOT NULL,
	version INTEGER NOT NULL,
	PRIMARY KEY (uid),
	CONSTRAINT USERNAMEUNIQUE UNIQUE (user_name)
);

CREATE TABLE secret (
	uid INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1),
	account_uid INTEGER NOT NULL,
	encrypted_secret BLOB(1024) NOT NULL,
	iv BLOB(16) NOT NULL,
	version INTEGER NOT NULL,
	PRIMARY KEY (uid),
	FOREIGN KEY (account_uid) REFERENCES account (uid)
);
